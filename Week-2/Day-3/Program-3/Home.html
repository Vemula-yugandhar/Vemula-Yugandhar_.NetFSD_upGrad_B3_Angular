<!DOCTYPE html>
<html>
<head>
    <title>Weather Data Fetcher</title>
</head>
<body>

    <h2>ðŸŒ¤ Weather Report</h2>
    <button id="promiseBtn">Fetch (Promises)</button>
    <button id="asyncBtn">Fetch (Async/Await)</button>

    <div id="output"></div>

    <script>
        const outputDiv = document.getElementById("output");

        const latitude = 12.97;   // Bangalore
        const longitude = 77.59;

        const url = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`;

        const fetchWeatherPromise = () => {

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Failed to fetch weather data");
                    }
                    return response.json();
                })
                .then(data => {
                    displayWeather(data.current_weather, "Promise Version");
                })
                .catch(error => {
                    showError(error.message);
                });
        };

        const fetchWeatherAsync = async () => {
            try {
                const response = await fetch(url);

                if (!response.ok) {
                    throw new Error("Failed to fetch weather data");
                }

                const data = await response.json();
                displayWeather(data.current_weather, "Async/Await Version");

            } catch (error) {
                showError(error.message);
            }
        };

        const displayWeather = (weather, version) => {
            outputDiv.innerHTML = `
                <h3>${version}</h3>
                <p><strong>Temperature:</strong> ${weather.temperature}Â°C</p>
                <p><strong>Wind Speed:</strong> ${weather.windspeed} km/h</p>
                <p><strong>Wind Direction:</strong> ${weather.winddirection}Â°</p>
                <p><strong>Time:</strong> ${weather.time}</p>
                <hr>
            `;
        };

        const showError = (message) => {
            outputDiv.innerHTML = `
                <p style="color:red;"><strong>Error:</strong> ${message}</p>
            `;
        };

        
        document.getElementById("promiseBtn")
            .addEventListener("click", fetchWeatherPromise);

        document.getElementById("asyncBtn")
            .addEventListener("click", fetchWeatherAsync);

    </script>

</body>
</html>